18年金融界发生了一个重大的事件，是资管新规的落地。新规允许银行开设理财子公司，同时要求打破刚性兑付，金融机构不得承诺保本收益，强化产品净值化。换句话说，理财产品的竞争变得更加激烈，要求金融机构对投资产品的风险有更加严格的把控。理财产品背后的投资组合，大部分由固收或类固收资产构成，如何才能将更加有效地对组合的风险进行控制，需要定量化的风险预测模型。固定收益的风险模型在国外已经经历了较长的发展历程，目前提供固收风险模型的知名机构有彭博、FactSet、MSCI等。本文中将会介绍彭博的固定收益风险模型框架。

# 背景介绍

风险模型的作用十分广泛，它可以帮助基金经理认识到组合的风险来源、预测组合风险、组合的业绩归因、组合构建。风险模型由一系列的因子构成，我们又把它叫做因子模型（factor model）。这些因子用于解释市场上每个资产的收益来源，它们被称为市场的“公共因子（common factors）”。公共因子本身有自己的收益率和波动率，有的因子波动率高，有的波动率低。高波动因子可以获得更高的收益率，同时也可能跌得比别的因子要多。举个不恰当的比喻，在NBA赛场上，JR.史密斯被称为神经刀，在表现好的场次可以连续轰下40分，而手感不好的时候，可以频繁打铁不得分。而低波动率则相反，它像姚明，虽然也有高光时刻，但大部分时间稳定得20分。因子之间还存在相关性，两个相关性比较高的因子，则很容易出现共振现象。

资产在每个因子上有不同程度的暴露度，可以理解为影响程度。例如某个资产在高波动率的因子上暴露很大，则表明它易受到这个因子的影响，也就表现为高波动。

因子模型来源于市场上所有的资产表现。常见的因子模型有三种类别，统计因子、直接因子、隐含因子。它们的区别在于如何定义因子收益率和因子暴露度。它们各有优缺点。

统计因子（statistical factor）是他们中最简单的因子，仅需要资产的收益率数据，通过主成分分析法（PCA），就可以计算出因子收益率和因子暴露度。它的缺点是不太好解释每个因子的含义，而这在金融领域是一个很重要的信息。

直接因子（explicit factor）首先要确定因子收益率，宏观因子多采用这种方法。常见的直接因子有GDP增长率、房地产指数变化率等。而资产对因子的暴露度，则是通过资产的收益率对因子的收益率做时间序列回归得到。它的缺点是，模型在样本内表现好，但是在样本外则表现不太好。

隐含因子（implicit factor）的挖掘方法和直接因子相反，它首先要确定每个资产在因子上的暴露度。通过资产的收益率和因子的暴露度，做横截面回归，得到因子的收益率。它不像直接因子的因子收益率是通过观测得到的，隐含因子的因子收益率是算出来的，因此又会把它叫做内生因子模型。而资产的因子暴露度则是通过基本面的信息计算出来。

相比于统计因子，直接因子和隐含因子更具有解释性，可以给基金经理对风险提供更深层次的理解，而且更具有实操性，因此这两种类型的因子更加受欢迎。本文的主角彭博也是这种思路。除了因子的选型之外，针对不同的市场的特点，彭博搭建了不同的风险模型。一般可以分为两类，发达国家和新兴国家。而这两种分类可以将债券划分成四种类型，分别根据发行国家和发行货币区分。

1. 由发达国家发行，以发达国家货币进行清算
2. 由发达国家发行，以新兴国家货币进行清算
3. 由新兴国家发行，以发达国家货币进行清算
4. 由新兴国家发行，以新兴国家货币进行清算

本文关注第1种类型的债券，彭博搭建的风险模型称为"G7模型"。

# 模型结构

彭博选择的公共因子包括：货币因子、曲线因子、波动因子和信用利差因子，其中前三类因子属于直接因子，而信用利差因子是隐含因子。接下来会详细介绍这几类因子。在此之前，需要澄清一个概念，就是时间收益。债券和股票不同的一点在于，债券有到期时间。随着债券临近到期时刻，在这个过程中债券会获得时间收益（time return），这是债券的固有属性，而且这个时间收益是一个确定值。因此在债券的总收益中，需要将时间收益剥离出去，剩余的部分才是个随机变量，才能被风险模型所解释，他们可以被写成下面式子的形式
$$
R_n^t-R_n^{t,time}=\sum_{k=1}^kX_{nk}^t\cdot F_k^t+\epsilon_n^t \tag{1}
$$
其中上标$t$表示时间，$R_n^t$和$R_n^{t,time}$分别表示资产$n$在第$t$期的总收益和时间收益。我们将它们的差值作为回归目标。$X_{nk}^t$是资产$n$在$t$时刻在因子$k$上的暴露度，是预先计算好的。这个式子中$F_k^t$是未知的变量，通过最小化残差$\epsilon_n^t$求得。

## 货币因子

当资产使用的清算货币A，和组合清算的货币B不同时，这个资产必须要使用组合的货币B来清算，表示我们要从货币B的角度来衡量资产的收益和风险。它以货币B清算的名义货币收益，可以由货币A的收益（local return）和外汇收益（currency return）两部分组成。
$$
(1+R_n^B)=(1+R_{FX}^{A:B})(1+R_n^A)\approx 1+R_{FX}^{A:B} + R_n^A \tag{2}
$$
其中$R_n^A$是资产在货币A的local return，$R_{FX}^{A:B}$是货币A转到货币B的currency return。需要注意的是，$R_{FX}^{A:B}$和具体哪个资产无关，是市场的基础数据，因此没有下标$n$。我们可以近似将资产对名义货币B的收益$R_n^B$看成是外汇收益$R_{FX}^{A:B}$和货币A的收益$R_n^A$之和。

人们对外汇收益$R_{FX}^{A:B}$的认识由两部分组成，分别是预期的和非预期的。其中预期的外汇收益可以用两个市场的无风险收益率的差值$r_f^B-r_f^A$计算得到，这是可以确定的部分，因此剩余部分$R_{FX}^{A:B}-(r_f^B-r_f^A)$为随机变量。同理，对于$R_n^A$也包含有其对应的确定部分$R_n^A-R_n^{A,time}$，因此对于资产$n$对名义货币B的随机变量部分为
$$
R_n^B-(R_n^{A,time}+(r_f^{B}-r_f^A))=(R_{FX}^{A:B}-(r_f^B-r_f^A)) + (R_n^A-R_n^{A,time}) \tag{3}
$$
式子$(3)$将名义货币B收益中的随机变量部分，拆分成外汇收益的随机变量部分和货币A收益的随机变量部分。并且，资产以货币A进行清算，所获得的收益和承担的风险，与以具体的名义货币B是哪种货币无关。而选择哪种名义货币带来的收益和风险的影响，体现在外汇部分。

## 曲线因子

对于债券而言，影响价格最重要的因素是利率的变动，因为债券价格是由利率对未来的现金流折现得到的现值，如果利率变化了，现值也将会产生变化。因此，债券价格对于利率的敏感度，可以作为解释债券收益的一个公共因子。

为此引入了久期和凸度的概念。久期的种类比较多，有修正久期、麦考雷久期、有效久期等，这些基础知识可以查阅相关资料，它们都衡量了债券对利率变化的暴露度。